<!-- ุตูุญุฉ ูุงุฆูุฉ ุงูุฃุฑุงุถู -->
<div class="flex min-h-screen bg-gray-50">
  <app-sidebar></app-sidebar>

  <div class="flex-1 mr-64">
    <app-topbar></app-topbar>

    <main class="p-6">
      <!-- ุงูุนููุงู -->
      <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-800">ุฃุฑุงุถูู ุงูุฒุฑุงุนูุฉ ๐พ</h1>
        <p class="text-gray-600 mt-1">ุฅุฏุงุฑุฉ ุฌููุน ุฃุฑุงุถูู ุงูุฒุฑุงุนูุฉ</p>
      </div>

      <!-- ุฃุฏูุงุช ุงูุจุญุซ ูุงูููุชุฑุฉ -->
      <div class="card mb-6">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <!-- ุงูุจุญุซ -->
          <div class="md:col-span-2">
            <label class="label">ุงูุจุญุซ</label>
            <input
              type="text"
              [(ngModel)]="searchTerm"
              (ngModelChange)="applyFilters()"
              class="input-field"
              placeholder="ุงุจุญุซ ุจุงููุญุงูุธุฉุ ุงููุฑูุฒุ ุงููุฑูุฉุ ุฃู ููุน ุงููุญุตูู..."
            />
          </div>

          <!-- ุงูููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ -->
          <div>
            <label class="label">ุงูุญุงูุฉ</label>
            <select
              [(ngModel)]="selectedStatus"
              (ngModelChange)="applyFilters()"
              class="input-field"
            >
              <option
                *ngFor="let option of statusOptions"
                [value]="option.value"
              >
                {{ option.label }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <!-- Loader -->
      <app-loader *ngIf="isLoading"></app-loader>

      <!-- ูุงุฆูุฉ ุงูุฃุฑุงุถู -->
      <div *ngIf="!isLoading">
        <!-- ุฑุณุงูุฉ ูุงุฑุบุฉ -->
        <div *ngIf="filteredLands.length === 0" class="card text-center py-12">
          <span class="text-6xl mb-4 block">๐พ</span>
          <h3 class="text-xl font-semibold text-gray-800 mb-2">
            ูุง ุชูุฌุฏ ุฃุฑุงุถู
          </h3>
          <p class="text-gray-600">
            {{
              searchTerm || selectedStatus !== "all"
                ? "ูุง ุชูุฌุฏ ูุชุงุฆุฌ ููุจุญุซ"
                : "ูู ุชูู ุจุฅุถุงูุฉ ุฃู ุฃุฑุงุถู ุจุนุฏ"
            }}
          </p>
        </div>

        <!-- ุฌุฏูู ุงูุฃุฑุงุถู -->
        <div
          *ngIf="filteredLands.length > 0"
          class="grid grid-cols-1 lg:grid-cols-2 gap-6"
        >
          <div
            *ngFor="let land of filteredLands"
            class="card hover:shadow-xl transition cursor-pointer group"
            (click)="viewLandDetails(land.id)"
          >
            <!-- ุงูุฑุฃุณ -->
            <div class="flex items-start justify-between mb-4">
              <div class="flex-1">
                <h3
                  class="text-lg font-bold text-gray-800 group-hover:text-primary-600 transition"
                >
                  ุฃุฑุถ {{ land.location.village }}
                </h3>
                <p class="text-sm text-gray-600">
                  {{ land.location.governorate }} - {{ land.location.district }}
                </p>
              </div>
              <app-badge [variant]="getLandStatusColor(land.status)">
                {{ land.status }}
              </app-badge>
            </div>

            <!-- ุงูุชูุงุตูู -->
            <div class="space-y-2 mb-4">
              <div class="flex items-center gap-2 text-sm text-gray-700">
                <span class="text-lg">๐</span>
                <span
                  >ุงููุณุงุญุฉ: <strong>{{ land.area }} ูุฏุงู</strong></span
                >
              </div>
              <div class="flex items-center gap-2 text-sm text-gray-700">
                <span class="text-lg">๐ฑ</span>
                <span
                  >ููุน ุงูุชุฑุจุฉ: <strong>{{ land.soilType }}</strong></span
                >
              </div>
              <div class="flex items-center gap-2 text-sm text-gray-700">
                <span class="text-lg">๐ง</span>
                <span
                  >ูุธุงู ุงูุฑู: <strong>{{ land.irrigationType }}</strong></span
                >
              </div>
              <div
                *ngIf="land.currentCrop"
                class="flex items-center gap-2 text-sm text-gray-700"
              >
                <span class="text-lg">๐พ</span>
                <span
                  >ุงููุญุตูู ุงูุญุงูู: <strong>{{ land.currentCrop }}</strong></span
                >
              </div>
            </div>

            <!-- ูุนูููุงุช ุฅุถุงููุฉ -->
            <div
              class="flex items-center justify-between pt-4 border-t border-gray-200"
            >
              <span class="text-xs text-gray-500">
                ๐ {{ land.contracts.length }} ุนูุฏ
              </span>
              <span
                class="text-primary-600 text-sm font-medium group-hover:underline"
              >
                ุนุฑุถ ุงูุชูุงุตูู โ
              </span>
            </div>
          </div>
        </div>

        <!-- ุงูุฅุญุตุงุฆูุงุช -->
        <div class="card mt-6 bg-primary-50">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm text-gray-600 mb-1">ุฅุฌูุงูู ุงููุชุงุฆุฌ</p>
              <p class="text-2xl font-bold text-gray-800">
                {{ filteredLands.length }} ุฃุฑุถ
              </p>
            </div>
            <div class="text-right">
              <p class="text-sm text-gray-600 mb-1">ุงููุณุงุญุฉ ุงูุฅุฌูุงููุฉ</p>
              <p class="text-2xl font-bold text-gray-800">
                {{ filteredTotalArea }}
                ูุฏุงู
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
